<app-header></app-header>

<ion-content class="ion-padding">
  <!-- ‚úÖ MINHAS SOLICITA√á√ïES -->
  <h2>Minhas Solicita√ß√µes</h2>

  <ion-list *ngIf="(minhasSolicitacoes$ | async) as minhasSolicitacoes">
    <ng-container *ngIf="minhasSolicitacoes.length > 0; else semMinhas">
      <ng-container *ngFor="let s of minhasSolicitacoes">
        <ion-item button detail (click)="abrirDetalhes(s)">
          <ion-label>
            <h3>{{ s.tipo }}</h3>
            <p>Data: {{ s.data }} - Status: {{ s.status }}</p>
          </ion-label>
        </ion-item>

        <ion-card *ngIf="itemSelecionadoId === s.id">
          <ion-card-header>
            <ion-card-title>Detalhes</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p><strong>Tipo:</strong> {{ s.tipo_sanguineo }}</p>
            <p><strong>Data:</strong> {{ s.data }}</p>
            <p><strong>Status:</strong> {{ s.status }}</p>
            <p><strong>Descri√ß√£o:</strong> {{ s.descricao || 'Sem descri√ß√£o' }}</p>
            <ion-button expand="block" color="danger" (click)="deletarSolicitacao(s.id)">
              üóëÔ∏è Deletar Solicita√ß√£o
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ng-container>
    </ng-container>
  </ion-list>

  <ng-template #semMinhas>
    <p>Voc√™ ainda n√£o criou nenhuma solicita√ß√£o.</p>
  </ng-template>

  <ion-button expand="block" color="primary" (click)="novaSolicitacao()">Nova Solicita√ß√£o</ion-button>

  <!-- ‚úÖ OUTRAS SOLICITA√á√ïES -->
  <h2 style="margin-top: 40px;">Solicita√ß√µes de Outros Usu√°rios</h2>

  <ion-list *ngIf="(outrasSolicitacoes$ | async) as outrasSolicitacoes">
    <ng-container *ngIf="outrasSolicitacoes.length > 0; else semOutros">
      <ng-container *ngFor="let o of outrasSolicitacoes">
        <ion-item button detail (click)="abrirDetalhes(o)">
          <ion-label>
            <h3>{{ o.tipo }}</h3>
            <p>Data: {{ o.data }} - Status: {{ o.status }}</p>
          </ion-label>
        </ion-item>

        <ion-card *ngIf="itemSelecionadoId === o.id">
          <ion-card-header>
            <ion-card-title>Detalhes</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p><strong>Tipo:</strong> {{ o.tipo_sanguineo }}</p>
            <p><strong>Data:</strong> {{ o.data }}</p>
            <p><strong>Status:</strong> {{ o.status }}</p>
            <p><strong>Descri√ß√£o:</strong> {{ o.descricao || 'Sem descri√ß√£o' }}</p>
          </ion-card-content>
        </ion-card>
      </ng-container>
    </ng-container>
  </ion-list>

  <ng-template #semOutros>
    <p>Nenhuma solicita√ß√£o de outros usu√°rios no momento.</p>
  </ng-template>
</ion-content>

<app-footer></app-footer>
